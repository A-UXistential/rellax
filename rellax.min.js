(function(h,g){"function"===typeof define&&define.amd?define([],g):"object"===typeof module&&module.exports?module.exports=g():h.Rellax=g()})(this,function(){var h=function(g,n){var b=Object.create(h.prototype),k=0,q=0,l=0,r=0,f=[],t=!1,B=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(a){setTimeout(a,1E3/60)},C=window.transformProp||function(){var a=document.createElement("div");
if(null===a.style.transform){var c=["Webkit","Moz","ms"],b;for(b in c)if(void 0!==a.style[c[b]+"Transform"])return c[b]+"Transform"}return"transform"}(),u=function(a,c,b){return a<=c?c:a>=b?b:a};b.options={speed:-2,center:!1,round:!0,vertical:!0,horizontal:!1,callback:function(){}};n&&Object.keys(n).forEach(function(a){b.options[a]=n[a]});b.options.speed=u(b.options.speed,-10,10);g||(g=".rellax");var v="string"===typeof g?document.querySelectorAll(g):[g];if(0<v.length)b.elems=v;else throw Error("The elements you're trying to select don't exist.");
var z=function(){for(var a=0;a<f.length;a++)b.elems[a].style.cssText=f[a].style;f=[];q=window.innerHeight;r=window.innerWidth;w();for(a=0;a<b.elems.length;a++){var c=b.elems[a],e=c.getAttribute("data-rellax-percentage"),d=c.getAttribute("data-rellax-speed"),g=c.getAttribute("data-rellax-zindex")||0,m=b.options.vertical?e||b.options.center?window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop:0:0,p=b.options.horizontal?e||b.options.center?window.pageXOffset||document.documentElement.scrollLeft||
document.body.scrollLeft:0:0,h=m+c.getBoundingClientRect().top,k=c.clientHeight||c.offsetHeight||c.scrollHeight,l=p+c.getBoundingClientRect().left,n=c.clientWidth||c.offsetWidth||c.scrollWidth;m=e?e:(m-h+q)/(k+q);var t=e?e:(p-l+r)/(n+r);b.options.center&&(m=t=.5);p=d?u(d,-10,10):b.options.speed;if(e||b.options.center)p=u(d||b.options.speed,-5,5);e=x(t,m,p);c=c.style.cssText;d="";0<=c.indexOf("transform")&&(d=c.indexOf("transform"),d=c.slice(d),d=(m=d.indexOf(";"))?" "+d.slice(11,m).replace(/\s/g,
""):" "+d.slice(11).replace(/\s/g,""));f.push({baseX:e.x,baseY:e.y,top:h,left:l,height:k,width:n,speed:p,style:c,transform:d,zindex:g})}y()},w=function(){var a=k,c=l;k=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;l=void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft;return a!=k&&b.options.vertical||c!=l&&b.options.horizontal?!0:!1},x=function(a,
c,e){var d={};a=100*e*(1-a);c=100*e*(1-c);d.x=b.options.round?Math.round(a):Math.round(100*a)/100;d.y=b.options.round?Math.round(c):Math.round(100*c)/100;return d},A=function(){w()&&!1===t&&y();B(A)},y=function(){for(var a=0;a<b.elems.length;a++){var c=x((l-f[a].left+r)/(f[a].width+r),(k-f[a].top+q)/(f[a].height+q),f[a].speed),e=c.y-f[a].baseY;c=c.x-f[a].baseX;b.elems[a].style[C]="translate3d("+(b.options.horizontal?c:"0")+"px,"+(b.options.vertical?e:"0")+"px,"+f[a].zindex+"px) "+f[a].transform}b.options.callback()};
b.destroy=function(){for(var a=0;a<b.elems.length;a++)b.elems[a].style.cssText=f[a].style;t=!0};z();window.addEventListener("resize",function(){z()});A();return b};return h});