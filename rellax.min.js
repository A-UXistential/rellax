(function(g,f){"function"===typeof define&&define.amd?define([],f):"object"===typeof module&&module.exports?module.exports=f():g.Rellax=f()})(this,function(){var g=function(f,m){var d=Object.create(g.prototype),k=0,n=0,l=0,p=0,e=[],q=!0,z=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(b){setTimeout(b,1E3/60)},A=window.transformProp||function(){var b=document.createElement("div");
if(null===b.style.transform){var a=["Webkit","Moz","ms"],c;for(c in a)if(void 0!==b.style[a[c]+"Transform"])return a[c]+"Transform"}return"transform"}();d.options={speed:-2,center:!1,round:!0,vertical:!0,horizontal:!1,callback:function(){}};m&&Object.keys(m).forEach(function(b){d.options[b]=m[b]});f||(f=".rellax");var r="string"===typeof f?document.querySelectorAll(f):[f];if(0<r.length)d.elems=r;else throw Error("The elements you're trying to select don't exist.");var u=function(){for(var b=0;b<e.length;b++)d.elems[b].style.cssText=
e[b].style;e=[];n=window.innerHeight;p=window.innerWidth;v();for(b=0;b<d.elems.length;b++){var a=d.elems[b],c=a.getAttribute("data-rellax-percentage"),t=a.getAttribute("data-rellax-speed"),f=a.getAttribute("data-rellax-zindex")||0,h=d.options.vertical?c||d.options.center?window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop:0:0,g=d.options.horizontal?c||d.options.center?window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft:0:0,k=h+a.getBoundingClientRect().top,
l=a.clientHeight||a.offsetHeight||a.scrollHeight,m=g+a.getBoundingClientRect().left,r=a.clientWidth||a.offsetWidth||a.scrollWidth;h=c?c:(h-k+n)/(l+n);c=c?c:(g-m+p)/(r+p);d.options.center&&(h=c=.5);t=t?t:d.options.speed;h=w(c,h,t);a=a.style.cssText;c="";0<=a.indexOf("transform")&&(c=a.indexOf("transform"),c=a.slice(c),c=(g=c.indexOf(";"))?" "+c.slice(11,g).replace(/\s/g,""):" "+c.slice(11).replace(/\s/g,""));e.push({baseX:h.x,baseY:h.y,top:k,left:m,height:l,width:r,speed:t,style:a,transform:c,zindex:f})}q&&
(window.addEventListener("resize",u),q=!1);x()},v=function(){var b=k,a=l;k=(document.documentElement||document.body.parentNode||document.body).scrollTop||window.pageYOffset;l=(document.documentElement||document.body.parentNode||document.body).scrollLeft||window.pageXOffset;return b!=k&&d.options.vertical||a!=l&&d.options.horizontal?!0:!1},w=function(b,a,c){var e={};b=100*c*(1-b);a=100*c*(1-a);e.x=d.options.round?Math.round(b):Math.round(100*b)/100;e.y=d.options.round?Math.round(a):Math.round(100*
a)/100;return e},y=function(){v()&&!1===q&&x();z(y)},x=function(){for(var b,a=0;a<d.elems.length;a++){b=w((l-e[a].left+p)/(e[a].width+p),(k-e[a].top+n)/(e[a].height+n),e[a].speed);var c=b.y-e[a].baseY,f=b.x-e[a].baseX;d.elems[a].style[A]="translate3d("+(d.options.horizontal?f:"0")+"px,"+(d.options.vertical?c:"0")+"px,"+e[a].zindex+"px) "+e[a].transform}d.options.callback(b)};d.destroy=function(){for(var b=0;b<d.elems.length;b++)d.elems[b].style.cssText=e[b].style;q||(window.removeEventListener("resize",
u),q=!0)};u();y();d.refresh=u;return d};return g});
