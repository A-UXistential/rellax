(function(h,d){"function"===typeof define&&define.amd?define([],d):"object"===typeof module&&module.exports?module.exports=d():h.Rellax=d()})(this,function(){var h=function(d,n){var a=Object.create(h.prototype),e=0,l=0,f=[],p=!1,w=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(a){setTimeout(a,1E3/60)};a.options={speed:-2,center:!1,wrapper:null};n&&Object.keys(n).forEach(function(c){a.options[c]=
n[c]});-10>a.options.speed?a.options.speed=-10:10<a.options.speed&&(a.options.speed=10);d||(d=".rellax");if(document.getElementsByClassName(d.replace(".","")))a.elems=document.getElementsByClassName(d.replace(".",""));else if(!1!==document.querySelector(d))a.elems=querySelector(d);else throw Error("The elements you're trying to select don't exist.");if(a.options.wrapper&&!a.options.wrapper.nodeType){var r=document.querySelector(a.options.wrapper);if(r)a.options.wrapper=r;else throw Error("The wrapper you're trying to use don't exist.");
}var t=function(){for(var c=0;c<a.elems.length;c++){var b=a.elems[c],d=a.options.wrapper?a.options.wrapper:document.body,m=b.getAttribute("data-rellax-percentage")||a.options.center?d.scrollTop:0,d=m+b.getBoundingClientRect().top,h=b.clientHeight||b.offsetHeight||b.scrollHeight,e=b.getAttribute("data-rellax-percentage")?b.getAttribute("data-rellax-percentage"):(m-d+l)/(h+l);a.options.center&&(e=.5);m=b.getAttribute("data-rellax-speed")?q(b.getAttribute("data-rellax-speed"),10):a.options.speed;if(b.getAttribute("data-rellax-percentage")||
a.options.center)m=b.getAttribute("data-rellax-speed")?q(b.getAttribute("data-rellax-speed"),5):q(a.options.speed,5);var e=Math.round(100*m*(1-e)),b=b.style.cssText,g="";if(0<=b.indexOf("transform"))var g=b.indexOf("transform"),g=b.slice(g),k=g.indexOf(";"),g=k?" "+g.slice(11,k).replace(/\s/g,""):" "+g.slice(11).replace(/\s/g,"");f.push({base:e,top:d,height:h,speed:m,style:b,transform:g})}},q=function(a,b){return a<-b?-b:a>b?b:a},u=function(){var c=e;e=a.options.wrapper?a.options.wrapper.scrollTop:
void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return c!=e?!0:!1},v=function(){u()&&!1===p&&k();w(v)},k=function(){for(var c=0;c<a.elems.length;c++){var b=" translate3d(0,"+(Math.round(100*f[c].speed*(1-(e-f[c].top+l)/(f[c].height+l)))-f[c].base)+"px,0)"+f[c].transform;a.elems[c].style.cssText=f[c].style+"-webkit-transform:"+b+";-moz-transform:"+b+";transform:"+b+";"}};a.refresh=function(){a.destroy();l=window.innerHeight;
f=[];t();k();p=!1};a.destroy=function(){for(var c=0;c<a.elems.length;c++)a.elems[c].style.cssText=f[c].style;p=!0};(function(){l=window.innerHeight;u();t();window.addEventListener("resize",function(){k()});v();k()})();return a};return h});
